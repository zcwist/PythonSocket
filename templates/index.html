<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
		<link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.2.0/css/bootstrap.min.css">
		<script src="http://cdn.bootcss.com/jquery/1.11.1/jquery.min.js"></script>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<script src="http://cdn.bootcss.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
		<script>
			var ws = new WebSocket('ws://localhost:8000/soc');
				ws.onmessage = function(event){
					var table = document.getElementById('message');
					var data = eval('(' + event.data + ')');
					({
						'sys':function() {
							var cell = table.insertRow().insertCell();
							cell.colSpan = 2;
							cell.innerHTML = data['message'];
						},
						'user':function() {
							var row = table.insertRow();
							row.insertCell().innerHTML = data ['message'];
							row.insertCell().innerHTML = data['id'];

						},
					}[data['type']])();
			};

			function send() {
				ws.send(document.getElementById('chat').value);
				document.getElementById('chat').value = '';
			}
			function enterKey(event){    
            if(event.keyCode==13) {//键盘按下Enter键  
                send();  
            }  
        }  
		</script>
	</head>
	<body>
		<header class="top-header jumbotron" style="background-image: url(pic/banner1215.jpg);  background-repeat:no-repeat; height:100px">
		</header>
		<div class="container">
			<div class="row">
				<div class="col-md-6">
					<div class="row">
						<table id='message' border='1'></table>
					</div>
					<div class="row">
						<input id='chat' onkeypress="enterKey(event)"><button onclick="send()">Send</button>

					</div>
					
				</div>	
				<div class="col-md-6">
					
				</div>
			</div>
		</div>
		
		
	</body>